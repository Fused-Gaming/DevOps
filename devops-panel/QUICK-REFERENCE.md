# DevOps Panel - Quick Reference Guide

One-liner commands to fetch and deploy the DevOps Panel from GitHub.

## ðŸš€ One-Liner Installations

### Option 1: Fetch and Auto-Deploy (Interactive Menu)

```bash
curl -fsSL https://github.com/Fused-Gaming/DevOps/raw/main/devops-panel/auto-deploy.sh | bash
```

Or with wget:
```bash
wget -qO- https://github.com/Fused-Gaming/DevOps/raw/main/devops-panel/auto-deploy.sh | bash
```

**What it does:**
- Clones the repository
- Installs dependencies
- Presents interactive menu for deployment options

### Option 1a: Auto-Deploy to Preview Server (No Menu)

```bash
curl -fsSL https://github.com/Fused-Gaming/DevOps/raw/main/devops-panel/auto-deploy.sh | AUTO_DEPLOY_MODE=preview bash
```

**Auto-deploy modes:**
- `preview` - Deploy to preview server (SSH)
- `dev` - Start development server
- `build` - Build for production
- `vercel` - Deploy to Vercel

### Option 1b: Deploy to Any Subdomain (Multi-Environment)

```bash
# One-time setup
./setup-deployment-config.sh

# Deploy to different environments
./deploy-to-subdomain.sh SUB_DOMAIN1  # preview.vln.gg
./deploy-to-subdomain.sh SUB_DOMAIN2  # dev.vln.gg
./deploy-to-subdomain.sh SUB_DOMAIN3  # staging.vln.gg
```

**See [SUBDOMAIN-DEPLOYMENT.md](./SUBDOMAIN-DEPLOYMENT.md) for complete guide.**

### Option 2: Fetch, Build, and Start Development (One Command)

```bash
git clone https://github.com/Fused-Gaming/DevOps.git && \
cd DevOps/devops-panel && \
chmod +x quick-start.sh && \
./quick-start.sh
```

### Option 3: Update Existing Installation and Deploy

```bash
cd ~/devops-panel/devops-panel && \
git pull && \
./deploy-preview.sh
```

## ðŸ“¦ Manual Step-by-Step

### Fresh Installation

```bash
# 1. Clone repository
git clone https://github.com/Fused-Gaming/DevOps.git
cd DevOps/devops-panel

# 2. Make scripts executable
chmod +x *.sh

# 3. Start development
./quick-start.sh
```

### Deploy to Preview Server (SSH)

```bash
# 1. Navigate to panel directory
cd DevOps/devops-panel

# 2. Configure server (first time only)
cp .env.deploy.example .env.deploy
nano .env.deploy  # Add your server IP and settings

# 3. Deploy
./deploy-preview.sh
```

### Deploy to Vercel Production

```bash
cd DevOps/devops-panel
./deploy-production.sh
# Choose option 1 for production
```

## ðŸ”„ Automated Continuous Deployment

### Set Up GitHub Webhook for Auto-Deploy

```bash
# On your server
cd /var/www/devops-panel
./webhook-listener.sh
```

This sets up automatic rebuilds on every push to `main` branch.

**GitHub Webhook Configuration:**
- URL: `http://YOUR_SERVER_IP:9000/hooks/devops-panel`
- Content type: `application/json`
- Secret: Set in `hooks.json`
- Events: Just push events

## ðŸ› ï¸ Environment Configurations

### Development (.env)

```bash
# Auto-generated by quick-start.sh
cp .env.example .env
nano .env
```

### Preview Server Deployment (.env.deploy)

```bash
cp .env.deploy.example .env.deploy

# Edit with your server details
nano .env.deploy
```

**Required variables:**
```env
PREVIEW_SERVER_HOST=YOUR_SERVER_IP
PREVIEW_SERVER_USER=root
PREVIEW_DEPLOY_PATH=/var/www/devops-panel
PREVIEW_DOMAIN=preview.vln.gg
PREVIEW_SSH_KEY=~/.ssh/id_rsa
```

## ðŸ“‹ Common Commands

### Development

```bash
# Start dev server
pnpm dev

# Build for production
pnpm build

# Start production server
pnpm start

# Run linter
pnpm lint
```

### Git Operations

```bash
# Update to latest
git pull origin main

# Switch branch
git checkout develop

# View changes
git status
git log --oneline -10
```

### Server Management (PM2)

```bash
# View status
pm2 status

# View logs
pm2 logs devops-panel-preview

# Restart
pm2 restart devops-panel-preview

# Stop
pm2 stop devops-panel-preview

# Monitor resources
pm2 monit
```

### Nginx Management

```bash
# Test configuration
sudo nginx -t

# Reload
sudo systemctl reload nginx

# View logs
sudo tail -f /var/log/nginx/devops-panel-preview-access.log
sudo tail -f /var/log/nginx/devops-panel-preview-error.log
```

## ðŸ” Security Credentials Generation

### Password Hash for Production

```bash
node -e "const bcrypt = require('bcryptjs'); console.log(bcrypt.hashSync('YOUR_PASSWORD', 10));"
```

### Session Secret

```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'));"
```

### SSH Key Generation

```bash
ssh-keygen -t ed25519 -f ~/.ssh/id_rsa_preview -C "devops-panel"
```

## ðŸŽ¯ Quick Deployment Scenarios

### Scenario 1: First Time Setup (Local Development)

```bash
curl -fsSL https://github.com/Fused-Gaming/DevOps/raw/main/devops-panel/auto-deploy.sh | bash
# Choose option 1 - Start development server
```

### Scenario 2: Deploy to Your Server

```bash
# Clone repo
git clone https://github.com/Fused-Gaming/DevOps.git
cd DevOps/devops-panel

# Configure deployment
cp .env.deploy.example .env.deploy
nano .env.deploy  # Set PREVIEW_SERVER_HOST=YOUR_IP

# Deploy
./deploy-preview.sh
```

### Scenario 3: Update Existing Deployment

```bash
cd ~/DevOps/devops-panel
git pull
./deploy-preview.sh  # Or ./deploy-production.sh for Vercel
```

### Scenario 4: Quick Test/Development

```bash
git clone --depth 1 https://github.com/Fused-Gaming/DevOps.git
cd DevOps/devops-panel
pnpm install
cp .env.example .env
pnpm dev
```

## ðŸ“¡ Remote Deployment (From CI/CD)

### GitHub Actions Deployment

Add to `.github/workflows/deploy.yml`:

```yaml
name: Deploy to Preview Server

on:
  push:
    branches: [main]
    paths:
      - 'devops-panel/**'

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup SSH
        run: |
          mkdir -p ~/.ssh
          echo "${{ secrets.SSH_PRIVATE_KEY }}" > ~/.ssh/id_rsa
          chmod 600 ~/.ssh/id_rsa
          ssh-keyscan -H ${{ secrets.SERVER_HOST }} >> ~/.ssh/known_hosts

      - name: Deploy
        env:
          PREVIEW_SERVER_HOST: ${{ secrets.SERVER_HOST }}
          PREVIEW_SERVER_USER: ${{ secrets.SERVER_USER }}
          PREVIEW_DEPLOY_PATH: /var/www/devops-panel
          PREVIEW_DOMAIN: preview.vln.gg
          PREVIEW_SSH_KEY: ~/.ssh/id_rsa
        run: |
          cd devops-panel
          ./deploy-preview.sh
```

## ðŸ†˜ Troubleshooting

### Port Already in Use

```bash
# Find and kill process on port 3000
lsof -ti:3000 | xargs kill -9

# Or use different port
PORT=3001 pnpm dev
```

### Permission Denied on Scripts

```bash
chmod +x *.sh
```

### SSH Connection Failed

```bash
# Test SSH connection
ssh -i ~/.ssh/id_rsa root@YOUR_SERVER_IP

# Check SSH key permissions
chmod 600 ~/.ssh/id_rsa
chmod 700 ~/.ssh
```

### Build Failed

```bash
# Clear cache and rebuild
rm -rf node_modules .next
pnpm install
pnpm build
```

### Deployment Stuck

```bash
# Check server status
ssh root@YOUR_SERVER "pm2 status"

# View server logs
ssh root@YOUR_SERVER "pm2 logs devops-panel-preview --lines 50"
```

## ðŸ”— Useful URLs

- **Repository**: https://github.com/Fused-Gaming/DevOps
- **Panel Directory**: https://github.com/Fused-Gaming/DevOps/tree/main/devops-panel
- **Auto-Deploy Script**: https://github.com/Fused-Gaming/DevOps/raw/main/devops-panel/auto-deploy.sh
- **Production (Vercel)**: https://dev.vln.gg
- **Preview Server**: https://preview.vln.gg

## ðŸ“š Additional Documentation

- [README.md](./README.md) - Main documentation
- [README-SCRIPTS.md](./README-SCRIPTS.md) - Detailed script documentation
- [SERVER-SETUP.md](./SERVER-SETUP.md) - Complete server setup guide
- [DEPLOYMENT.md](./DEPLOYMENT.md) - Vercel deployment guide
- [QUICKSTART.md](./QUICKSTART.md) - Quick start guide

---

**Pro Tip**: Bookmark this page for quick access to deployment commands!

**Last Updated**: 2025-11-19
